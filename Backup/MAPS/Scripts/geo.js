var Geo = {}; Geo.parseDMS = function (e) { if ("object" == typeof t) throw new TypeError("Geo.parseDMS - dmsStr is [DOM?] object"); if ("number" == typeof e && isFinite(e)) return Number(e); var r = String(e).trim().replace(/^-/, "").replace(/[NSEW]$/i, "").split(/[^0-9.,]+/); if ("" == r[r.length - 1] && r.splice(r.length - 1), "" == r) return 0 / 0; switch (r.length) { case 3: var t = r[0] / 1 + r[1] / 60 + r[2] / 3600; break; case 2: var t = r[0] / 1 + r[1] / 60; break; case 1: var t = r[0]; break; default: return 0 / 0 } return /^-|[WS]$/i.test(e.trim()) && (t = -t), Number(t) }, Geo.toDMS = function (e, r, t) { if ("object" == typeof e) throw new TypeError("Geo.toDMS - deg is [DOM?] object"); if (isNaN(e)) return null; if ("undefined" == typeof r && (r = "dms"), "undefined" == typeof t) switch (r) { case "d": t = 4; break; case "dm": t = 2; break; case "dms": t = 0; break; default: r = "dms", t = 0 } switch (e = Math.abs(e), r) { case "d": n = e.toFixed(t), 100 > n && (n = "0" + n), 10 > n && (n = "0" + n), dms = n + "°"; break; case "dm": var o = (60 * e).toFixed(t), n = Math.floor(o / 60), a = (o % 60).toFixed(t); 100 > n && (n = "0" + n), 10 > n && (n = "0" + n), 10 > a && (a = "0" + a), dms = n + "°" + a + "′"; break; case "dms": var i = (3600 * e).toFixed(t), n = Math.floor(i / 3600), a = Math.floor(i / 60) % 60, s = (i % 60).toFixed(t); 100 > n && (n = "0" + n), 10 > n && (n = "0" + n), 10 > a && (a = "0" + a), 10 > s && (s = "0" + s), dms = n + "°" + a + "′" + s + "″" } return dms }, Geo.toLat = function (e, r, t) { var o = Geo.toDMS(e, r, t); return null == o ? "–" : o.slice(1) + (0 > e ? "S" : "N") }, Geo.toLon = function (e, r, t) { var o = Geo.toDMS(e, r, t); return null == o ? "–" : o + (0 > e ? "W" : "E") }, Geo.toBrng = function (e, r, t) { e = (Number(e) + 360) % 360; var o = Geo.toDMS(e, r, t); return null == o ? "–" : o.replace("360", "0") }, window.console || (window.console = { log: function () { } });